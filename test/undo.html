<!doctype html>
<html>
<head>
<title>test</title>
<script src="require.js"></script>
<script src="stats.min.js"></script>
</head>
<body>
<section style="position:relative">
	<input type="range"><button>Undo</button>
	<div class="target">Lorem ipsum dolor sit amet</div>
</section>
<script>
require.config({
	baseUrl: '..',
	paths: {
		mori: 'node_modules/mori/mori',
		nbd: 'node_modules/nbd'
	}
});

require(['lib/CSSPipeline'], function(Pipeline) {
	var pipe = new Pipeline();
	pipe.push({
		main: function(input) {
			var s = input.scale;
			return { fontSize: s + 'px' };
		}
	});

	var node = document.querySelectorAll('.target');

	var slider = document.querySelector('input[type=range]');
	slider.addEventListener('input', function() {
		pipe.process(node, { scale: +this.value });
	});

	slider.addEventListener('change', function() {
		pipe.commit(node);
	});

	var button = document.querySelector('button');
	button.addEventListener('click', function() {
		pipe.revert(node, 1);
	});
});
</script>
</body>
</html>
